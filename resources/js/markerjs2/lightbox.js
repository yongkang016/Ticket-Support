import {ColorPickerPanel, RectangularBoxMarkerBase, SvgHelper} from 'markerjs2';

export class LightBoxMarker extends RectangularBoxMarkerBase {
    strokeColor = 'transparent';
    strokeWidth = 0;

    constructor(container, overlayContainer, settings) {
        super(container, overlayContainer, settings);

        this.strokeColor = settings.defaultColor;
        this.strokeWidth = settings.defaultStrokeWidth;

        this.createVisual = this.createVisual.bind(this);
        this.setStrokeColor = this.setStrokeColor.bind(this);

        this.strokePanel = new ColorPickerPanel(
            'line color',
            settings.defaultColorSet,
            settings.defaultColor,
        );

        this.strokePanel.onColorChanged = this.setStrokeColor;
    }

    createVisual() {
        this.visual = SvgHelper.createImage([
            ['href', 'data:image/png;base64,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'],
            ['width', '50'],
            ['height', '20'],
        ]);
        this.addMarkerVisualToContainer(this.visual);
    }

    setPoints() {
        super.setSize();
        SvgHelper.setAttributes(this.visual, [
            ['href', 'data:image/png;base64,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'],
            ['width', this.width],
            ['height', this.height],
        ]);
    }

    pointerDown(point, target) {
        super.pointerDown(point, target);
        if (this.state === 'new') {
            this.createVisual();
            this.moveVisual(point);
            this._state = 'creating';
        }
    }

    resize(point) {
        super.resize(point);
        this.setPoints();
    }

    pointerUp(point) {
        super.pointerUp(point);
        this.setPoints();
    }

    ownsTarget(el) {
        if (super.ownsTarget(el) || el === this.visual) {
            return true;
        } else {
            return false;
        }
    }

    setStrokeColor(color) {
        this.strokeColor = color;
        if (this.visual) {
            SvgHelper.setAttributes(this.visual, [['stroke', this.strokeColor]]);
        }
    }

    get toolboxPanels() {
        return [this.strokePanel];
    }

    getState() {
        const result = Object.assign({
            strokeColor: this.strokeColor
        }, super.getState());
        result.typeName = LightBoxMarker.typeName;

        return result;
    }

    restoreState(state) {
        const rectState = state;
        this.strokeColor = rectState.strokeColor;

        this.createVisual();
        super.restoreState(state);
        this.setPoints();
    }

    scale(scaleX, scaleY) {
        super.scale(scaleX, scaleY);
        this.setPoints();
    }
}

LightBoxMarker.typeName = 'LightBoxMarker';
LightBoxMarker.title = 'Light Box Marker';
LightBoxMarker.icon = '<svg fill="#ffffff" height="20px" width="20px" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 438.479 438.479" xmlns:xlink="http://www.w3.org/1999/xlink" enable-background="new 0 0 438.479 438.479"><g id="SVGRepo_bgCarrier" stroke-width="0"></g><g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g><g id="SVGRepo_iconCarrier"> <g> <path d="M378.982,0H59.497c-5.522,0-10,4.477-10,10v418.479c0,5.523,4.478,10,10,10h319.484c5.522,0,10-4.477,10-10V10 C388.982,4.477,384.504,0,378.982,0z M368.982,418.479H69.497V20h299.484V418.479z"></path> <path d="m92.497,405.479h253.484c5.522,0 10-4.477 10-10v-352.479c0-5.523-4.478-10-10-10h-253.484c-5.522,0-10,4.477-10,10v352.479c0,5.523 4.478,10 10,10zm10-352.479h233.484v332.479h-233.484v-332.479z"></path> <path d="m171.991,126.495h94.496c5.522,0 10-4.477 10-10s-4.478-10-10-10h-94.496c-5.522,0-10,4.477-10,10s4.478,10 10,10z"></path> <path d="m266.488,239.988h-94.496c-5.522,0-10,4.477-10,10s4.478,10 10,10h94.496c5.522,0 10-4.477 10-10s-4.478-10-10-10z"></path> <path d="m299.486,150.992h-160.493c-5.522,0-10,4.477-10,10s4.478,10 10,10h160.492c5.522,0 10-4.477 10-10s-4.477-10-9.999-10z"></path> <path d="m299.486,195.49h-160.493c-5.522,0-10,4.477-10,10s4.478,10 10,10h160.492c5.522,0 10-4.477 10-10s-4.477-10-9.999-10z"></path> </g> </g></svg>';
